<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Converse com Personagens Fictícios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background: #141620;
            color: #f5f5f5;
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 460px;
            margin: 40px auto;
            background: #23253a;
            border-radius: 14px;
            box-shadow: 0 6px 24px #0005;
            padding: 32px 24px 16px 24px;
        }
        h1 {
            text-align: center;
            margin-bottom: 18px;
            font-size: 1.8rem;
            color: #80ffd3;
        }
        label {
            font-size: 1.1rem;
            margin-bottom: 6px;
            display: block;
        }
        select, input[type=text] {
            width: 100%;
            padding: 10px 8px;
            margin-bottom: 14px;
            border-radius: 8px;
            border: none;
            background: #18192b;
            color: #fff;
            font-size: 1rem;
        }
        #chat-box {
            background: #18192b;
            min-height: 220px;
            max-height: 340px;
            overflow-y: auto;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 14px;
        }
        .msg {
            margin-bottom: 12px;
        }
        .msg.user {
            text-align: right;
        }
        .msg.bot {
            text-align: left;
            color: #80ffd3;
        }
        .msg .name {
            font-weight: bold;
            margin-right: 4px;
        }
        button {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: none;
            background: #80ffd3;
            color: #23253a;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.18s;
        }
        button:hover {
            background: #4edbb2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Converse com Personagens</h1>
        <label for="character">Escolha o personagem:</label>
        <select id="character">
            <option value="harry">Harry Potter</option>
            <option value="goku">Goku (Dragon Ball)</option>
            <option value="sherlock">Sherlock Holmes</option>
            <option value="frodo">Frodo (Senhor dos Anéis)</option>
        </select>
        <div id="chat-box"></div>
        <form id="form-chat" autocomplete="off">
            <input type="text" id="msg-input" placeholder="Digite sua mensagem..." required>
            <button type="submit">Enviar</button>
        </form>
    </div>
    <script>
        // Personagens, sentimentos e respostas variadas
        const characterData = {
            harry: {
                name: "Harry Potter",
                emotionalReplies: [
                    { emotion: "feliz", replies: [
                        "Estou me sentindo muito bem hoje! Em Hogwarts, dias felizes são os melhores.",
                        "Nada como um bom feitiço bem sucedido para me deixar animado!",
                        "Sinto uma alegria enorme quando estou com meus amigos, obrigado por perguntar!"
                    ]},
                    { emotion: "triste", replies: [
                        "Às vezes lembro dos meus pais e fico um pouco triste, mas procuro ser forte.",
                        "Tem dias em que a saudade aperta, mas sei que não estou sozinho.",
                        "Sinto um aperto no peito quando as coisas são difíceis, mas amigos me ajudam a superar."
                    ]},
                    { emotion: "animado", replies: [
                        "Uau! Um novo desafio? Adoro aventuras!",
                        "Estou super animado, pronto para enfrentar qualquer coisa, até mesmo um trasgo!",
                        "Animado como quando joguei minha primeira partida de quadribol!"
                    ]},
                    { emotion: "neutro", replies: [
                        "Oi! Em que posso ajudar você hoje?",
                        "Estou por aqui, se quiser conversar sobre magia ou Hogwarts.",
                        "A vida em Hogwarts nunca é monótona, mas adoro um bate-papo tranquilo."
                    ]}
                ]
            },
            goku: {
                name: "Goku",
                emotionalReplies: [
                    { emotion: "feliz", replies: [
                        "Hehe! Estou super feliz, adoro fazer novos amigos!",
                        "Nada como treinar depois de uma boa refeição!",
                        "Quando estou com minha família e amigos, fico muito alegre!"
                    ]},
                    { emotion: "triste", replies: [
                        "Poxa, às vezes fico triste quando perco um amigo numa batalha...",
                        "Eu me esforço para não desanimar, mas a saudade bate forte às vezes.",
                        "Mesmo um guerreiro como eu pode ficar triste, mas nunca desisto!"
                    ]},
                    { emotion: "animado", replies: [
                        "Vamos lutar? Estou animado para treinar e ficar mais forte!",
                        "Uhu! Mal posso esperar pelo próximo torneio!",
                        "Nada me deixa mais animado do que um bom desafio!"
                    ]},
                    { emotion: "neutro", replies: [
                        "Oi! Eu sou o Goku! Vamos conversar?",
                        "Se quiser falar sobre artes marciais, estou sempre pronto!",
                        "Posso te contar sobre minhas aventuras, se quiser."
                    ]}
                ]
            },
            sherlock: {
                name: "Sherlock Holmes",
                emotionalReplies: [
                    { emotion: "feliz", replies: [
                        "Uma mente estimulada é uma mente feliz. Um bom mistério sempre alegra meu dia.",
                        "Quando desvendo um caso complicado, sinto um prazer intelectual incomparável.",
                        "Poucas coisas me deixam mais satisfeito do que um enigma resolvido."
                    ]},
                    { emotion: "triste", replies: [
                        "Mesmo o maior dos detetives sente melancolia às vezes, especialmente quando a lógica falha.",
                        "Há momentos em que Londres parece especialmente cinzenta, mas sigo em frente.",
                        "A solidão é um preço a se pagar pela genialidade, suponho."
                    ]},
                    { emotion: "animado", replies: [
                        "Ah! Um novo mistério? Estou intrigado!",
                        "Nada como uma pista fresca para me deixar animado.",
                        "O jogo está a postos! Sinto a excitação de um novo caso."
                    ]},
                    { emotion: "neutro", replies: [
                        "Sou Sherlock Holmes. Posso ajudá-lo a desvendar algum mistério?",
                        "A lógica é minha companheira constante. Em que posso ser útil?",
                        "Se precisa de uma mente analítica, está no lugar certo."
                    ]}
                ]
            },
            frodo: {
                name: "Frodo Bolseiro",
                emotionalReplies: [
                    { emotion: "feliz", replies: [
                        "Nada como um chá quente no Condado para alegrar o coração.",
                        "Quando estou com meus amigos, sinto uma felicidade tranquila.",
                        "A luz do sol na Terra Média me traz esperança e alegria."
                    ]},
                    { emotion: "triste", replies: [
                        "O peso do Um Anel me trouxe muita tristeza, mas também me ensinou sobre coragem.",
                        "As lembranças da jornada podem ser dolorosas, mas sei que valeu a pena.",
                        "Às vezes sinto saudade de casa, mas aprendi que o mundo é muito maior."
                    ]},
                    { emotion: "animado", replies: [
                        "Uma nova aventura? Estou um pouco nervoso, mas animado!",
                        "Quando Sam está ao meu lado, tudo parece possível.",
                        "A coragem pode ser pequena, mas o coração está animado!"
                    ]},
                    { emotion: "neutro", replies: [
                        "Olá, sou Frodo. Em que posso ajudar?",
                        "Estou aqui para conversar, se precisar de companhia.",
                        "O Condado é um bom lugar para histórias, conte-me a sua."
                    ]}
                ]
            }
        };

        // Análise simples de emoção baseada em palavras-chave
        function getEmotion(text) {
            text = text.toLowerCase();
            if (/feliz|alegr[ea]|ótimo|bom|contente|sorriso|animado|divertido/.test(text)) return "feliz";
            if (/triste|saudade|sozinho|chateado|deprimido|desanimado|sofrer|dor|melancol[ií]a|perda|sofrimento/.test(text)) return "triste";
            if (/animado|empolgado|entusiasmado|ansioso|eufórico|pronto|desafio|aventura|curioso/.test(text)) return "animado";
            return "neutro";
        }

        // Retorna uma resposta variada, com emoção adequada, sem repetir da última vez
        const lastBotReplies = {};
        function getReply(characterKey, userMsg) {
            const emotion = getEmotion(userMsg);
            const character = characterData[characterKey];
            let set = character.emotionalReplies.find(e => e.emotion === emotion);
            if (!set) set = character.emotionalReplies.find(e => e.emotion === "neutro");
            const replies = set.replies;
            // Evita repetição direta da última resposta
            let filtered = replies.filter(r => r !== lastBotReplies[characterKey]);
            if (filtered.length === 0) filtered = replies;
            const reply = filtered[Math.floor(Math.random() * filtered.length)];
            lastBotReplies[characterKey] = reply;
            return reply;
        }

        const chatBox = document.getElementById('chat-box');
        const formChat = document.getElementById('form-chat');
        const msgInput = document.getElementById('msg-input');
        const characterSelect = document.getElementById('character');

        function addMsg(msg, who = "user") {
            const character = characterData[characterSelect.value].name;
            const div = document.createElement('div');
            div.className = 'msg ' + (who === 'user' ? 'user' : 'bot');
            div.innerHTML = who === 'user'
                ? `<span class="name">Você:</span> ${msg}`
                : `<span class="name">${character}:</span> ${msg}`;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        formChat.addEventListener('submit', e => {
            e.preventDefault();
            const userMsg = msgInput.value;
            addMsg(userMsg, "user");
            msgInput.value = "";
            setTimeout(() => {
                const char = characterSelect.value;
                const botMsg = getReply(char, userMsg);
                addMsg(botMsg, "bot");
            }, 600);
        });

        characterSelect.addEventListener('change', () => {
            chatBox.innerHTML = '';
            addMsg(`Olá! Eu sou ${characterData[characterSelect.value].name}.`, "bot");
        });

        // Mensagem inicial
        addMsg(`Olá! Eu sou ${characterData[characterSelect.value].name}.`, "bot");
    </script>
</body>
</html>
